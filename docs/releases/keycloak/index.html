<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>3rd party - Keycloak · Caritas Online-Beratung</title><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="generator" content="Docusaurus"/><meta name="description" content="## General description"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="3rd party - Keycloak · Caritas Online-Beratung"/><meta property="og:type" content="website"/><meta property="og:url" content="https://caritasdeutschland.github.io/documentation/"/><meta property="og:description" content="## General description"/><meta property="og:image" content="https://caritasdeutschland.github.io/documentation/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://caritasdeutschland.github.io/documentation/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/documentation/img/favicon.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/documentation/js/scrollSpy.js"></script><link rel="stylesheet" href="/documentation/css/main.css"/><script src="/documentation/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/documentation/"><img class="logo" src="/documentation/img/caritas_logo.svg" alt="Caritas Online-Beratung"/><h2 class="headerTitleWithLogo">Caritas Online-Beratung</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/documentation/docs/general/home" target="_self">Docs</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Releases of 3rd party components</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">General</h3><ul class=""><li class="navListItem"><a class="navItem" href="/documentation/docs/general/home">Home</a></li><li class="navListItem"><a class="navItem" href="/documentation/docs/general/git-workflow">Git workflow</a></li><li class="navListItem"><a class="navItem" href="/documentation/docs/general/browser-matrix">Browser matrix</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Project setup</h3><ul class=""><li class="navListItem"><a class="navItem" href="/documentation/docs/setup/setup-backend">Setting up the backend</a></li><li class="navListItem"><a class="navItem" href="/documentation/docs/setup/setup-frontend">Setting up the frontend</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Backend setup and configuration</h3><ul class=""><li class="navListItem"><a class="navItem" href="/documentation/docs/backend/install-and-running-on-server">Installing and running the backend on the server</a></li><li class="navListItem"><a class="navItem" href="/documentation/docs/backend/install-and-running-locally">Installing and running the backend for local development</a></li><li class="navListItem"><a class="navItem" href="/documentation/docs/backend/first-start">First start</a></li><li class="navListItem"><a class="navItem" href="/documentation/docs/backend/service-configuration">Service configuration</a></li><li class="navListItem"><a class="navItem" href="/documentation/docs/backend/file-permissions">File permissions</a></li><li class="navListItem"><a class="navItem" href="/documentation/docs/backend/openldap-configuration">OpenLDAP konfigurieren</a></li><li class="navListItem"><a class="navItem" href="/documentation/docs/backend/create-core-data-import-users">Create core data and import users</a></li><li class="navListItem"><a class="navItem" href="/documentation/docs/backend/mailservice-templates">Mail templates</a></li><li class="navListItem"><a class="navItem" href="/documentation/docs/backend/jenkins">Einrichten des Build-Prozesses über Jenkins</a></li><li class="navListItem"><a class="navItem" href="/documentation/docs/backend/nginx">NGINX configuration</a></li><li class="navListItem"><a class="navItem" href="/documentation/docs/backend/ssl-certificate">SSL certificate</a></li><li class="navListItem"><a class="navItem" href="/documentation/docs/backend/cors-configuration">CORS configuration</a></li><li class="navListItem"><a class="navItem" href="/documentation/docs/backend/video-backend">Installing and running the videoBackend</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Backend in general</h3><ul class=""><li class="navListItem"><a class="navItem" href="/documentation/docs/backend/service-overview">Service overview</a></li><li class="navListItem"><a class="navItem" href="/documentation/docs/backend/starting-and-stopping-the-services">Starting and stopping the services</a></li><li class="navListItem"><a class="navItem" href="/documentation/docs/backend/login-data-access-links">Login data and access links</a></li><li class="navListItem"><a class="navItem" href="/documentation/docs/backend/admin-api">Admin API</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Backend development</h3><ul class=""><li class="navListItem"><a class="navItem" href="/documentation/docs/backend/build-and-load-docker-image">Docker Image lokal bauen und in Docker laden</a></li><li class="navListItem"><a class="navItem" href="/documentation/docs/backend/liquibase">Database versioning with liquibase</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Frontend</h3><ul class=""><li class="navListItem"><a class="navItem" href="/documentation/docs/frontend/build">Build</a></li><li class="navListItem"><a class="navItem" href="/documentation/docs/frontend/tools-and-technologies">Tools and Technologies</a></li><li class="navListItem"><a class="navItem" href="/documentation/docs/frontend/testing">Testing</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Releases</h3><ul class=""><li class="navListItem"><a class="navItem" href="/documentation/docs/releases/overview">Overview</a></li><li class="navListItem"><a class="navItem" href="/documentation/docs/releases/versionhistory">Version History</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Releases of own services</h3><ul class=""><li class="navListItem"><a class="navItem" href="/documentation/docs/releases/agencyservice">AgencyService</a></li><li class="navListItem"><a class="navItem" href="/documentation/docs/releases/backend">Backend stack - Backend</a></li><li class="navListItem"><a class="navItem" href="/documentation/docs/releases/consultingtypeservice">ConsultingTypeService</a></li><li class="navListItem"><a class="navItem" href="/documentation/docs/releases/frontend">Frontend</a></li><li class="navListItem"><a class="navItem" href="/documentation/docs/releases/liveservice">LiveService</a></li><li class="navListItem"><a class="navItem" href="/documentation/docs/releases/mailservice">MailService</a></li><li class="navListItem"><a class="navItem" href="/documentation/docs/releases/messageservice">MessageService</a></li><li class="navListItem"><a class="navItem" href="/documentation/docs/releases/uploadservice">UploadService</a></li><li class="navListItem"><a class="navItem" href="/documentation/docs/releases/userservice">UserService</a></li><li class="navListItem"><a class="navItem" href="/documentation/docs/releases/videoservice">VideoService</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Releases of 3rd party components</h3><ul class=""><li class="navListItem"><a class="navItem" href="/documentation/docs/releases/adminer">3rd party - Adminer</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/documentation/docs/releases/keycloak">3rd party - Keycloak</a></li><li class="navListItem"><a class="navItem" href="/documentation/docs/releases/mariadb">3rd party - MariaDB</a></li><li class="navListItem"><a class="navItem" href="/documentation/docs/releases/mongodb">3rd party - MongoDB</a></li><li class="navListItem"><a class="navItem" href="/documentation/docs/releases/nginx">NGINX</a></li><li class="navListItem"><a class="navItem" href="/documentation/docs/releases/nosqlclient">3rd party -  Nosqlclient</a></li><li class="navListItem"><a class="navItem" href="/documentation/docs/releases/openldap">3rd party - OpenLDAP</a></li><li class="navListItem"><a class="navItem" href="/documentation/docs/releases/rocketchat">3rd party - Rocket.Chat</a></li><li class="navListItem"><a class="navItem" href="/documentation/docs/releases/videobackend">Backend stack - VideoBackend</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">3rd party - Keycloak</h1></header><article><div><span><h2><a class="anchor" aria-hidden="true" id="general-description"></a><a href="#general-description" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>General description</h2>
<p>This page describes changes/updates for the Keycloak component.</p>
<p>Only changes that are necessary to use the requested version are listed in this document.</p>
<p>If you want a changelog please see the project page at <a href="https://www.keycloak.org">https://www.keycloak.org</a>.</p>
<h3><a class="anchor" aria-hidden="true" id="unreleased"></a><a href="#unreleased" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Unreleased</h3>
<p>No unreleased changes yet.</p>
<h3><a class="anchor" aria-hidden="true" id="2022-03-29"></a><a href="#2022-03-29" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2022-03-29</h3>
<h4><a class="anchor" aria-hidden="true" id="keycloak-migration-guide----v-1700"></a><a href="#keycloak-migration-guide----v-1700" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Keycloak Migration Guide --&gt; V. 17.0.0</h4>
<ul>
<li>Backup .env file</li>
<li>Backup docker-compose.yml</li>
<li>Backup keycloak extension</li>
<li>Backup Keycloak/Keycloak.env</li>
<li>Backup MariaDB keycloak database (see below)</li>
<li>Build and copy keycloak extensions with 17.0.0 depedencies to the server</li>
<li>Adapt Keycloak/Keycloak.env (see below)</li>
<li>Adapt docker-compose.yml (see below)</li>
<li>Restart Keycloak service (runs DB migration upon start, check logs)</li>
<li>Redeploy services with 17.0.0 dependencies updated</li>
<li>Configure Custom Event Logging (see below)</li>
</ul>
<p>####Backup MariaDB
Execute while in backend folder (the one with the docker-compose.yml), assuming that the MariaDB
folder exists, containing an MariaDB.env file with <code>MYSQL_ROOT_PASSWORD</code> variable:</p>
<p><code>source MariaDB/MariaDB.env &amp;&amp; docker-compose exec mariadb mysqldump -uroot -p${MYSQL_ROOT_PASSWORD} keycloak &gt; keycloak-dump-$(date +%F_%H-%M-%S).sql</code></p>
<p>####Restore MariaDB (in case of rollback)
Execute while in backend folder (the one with the docker-compose.yml), assuming that the MariaDB
folder exists, containing an MariaDB.env file with MYSQL_ROOT_PASSWORD variable:</p>
<p><code>source MariaDB/MariaDB.env &amp;&amp; docker-compose exec -T mariadb mysql -uroot -p${MYSQL_ROOT_PASSWORD} keycloak &lt; keycloak-dump.sql</code></p>
<p>####Adapt Keycloak.env
Most of the former env. variables have changed, and configuration got easier. Here is an example
set of env variables which can be used to replace the former setup of version 13.0.1:</p>
<ul>
<li><code>KC_DB=mariadb</code></li>
<li><code>KC_DB_URL_HOST=mariadb</code></li>
<li><code>KC_DB_URL_DATABASE=keycloak</code></li>
<li><code>KC_DB_USERNAME=keycloak</code></li>
<li><code>KC_DB_PASSWORD=&lt;the password&gt;</code></li>
<li><code>KC_HTTP_RELATIVE_PATH=/auth</code></li>
<li><code>KC_PROXY=edge</code></li>
<li><code>KC_HOSTNAME=&lt;hostname.com&gt;</code></li>
<li><code>KC_LOG_LEVEL=INFO</code></li>
</ul>
<p>####Adapt docker-compose.yml
Paths for mounting extension and themes have changed. We need an additional flag in the container
entrypoint, since quarkus containers are supposed to be immutable. The flag tells Keycloak to start
up and apply the configuration for the specific environment. This enables us to use the standard
image without having to build and host our own.</p>
<p>####docker-compose.yml</p>
<pre><code class="hljs"><span class="hljs-symbol">keycloak:</span>
<span class="hljs-symbol">    container_name:</span> keycloak
<span class="hljs-symbol">    image:</span> quay.io<span class="hljs-meta-keyword">/keycloak/</span>keycloak:<span class="hljs-number">17.0</span><span class="hljs-number">.0</span>
<span class="hljs-symbol">    restart:</span> on-failure
<span class="hljs-symbol">    depends_on:</span>
        - mariadb
<span class="hljs-symbol">    env_file:</span>
        - Keycloak/Keycloak.env
<span class="hljs-symbol">    networks:</span>
        - database_network
        - frontend_network
        - ldap_network
<span class="hljs-symbol">    volumes:</span>
        - ./Keycloak/caritas-theme:<span class="hljs-meta-keyword">/opt/</span>keycloak<span class="hljs-meta-keyword">/themes/</span>caritas-theme
        - ./Keycloak/keycloak-otp-config-spi<span class="hljs-number">-1.0</span>-SNAPSHOT-keycloak.jar:<span class="hljs-meta-keyword">/opt/</span>keycloak<span class="hljs-meta-keyword">/providers/</span>keycloak-otp-config-spi<span class="hljs-number">-1.0</span>-SNAPSHOT-keycloak.jar
        - <span class="hljs-meta-keyword">/etc/</span>localtime:<span class="hljs-meta-keyword">/etc/</span>localtime:ro
<span class="hljs-symbol">    entrypoint:</span> <span class="hljs-string">"/opt/keycloak/bin/kc.sh start --auto-build"</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="configure-custom-event-logging"></a><a href="#configure-custom-event-logging" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Configure Custom Event Logging</h4>
<p>Extensive logging configuration is currently not supported. To omit IP addresses of each event,
we implemented a custom EventListenerProvider, which is included in the keycloak otp extension.
After deployment, it just has to be selected as the default in the event configuration:</p>
<h3><a class="anchor" aria-hidden="true" id="2022-03-15"></a><a href="#2022-03-15" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2022-03-15</h3>
<p>Build maven package <code>keycloak-otp-config-spi-1.0-SNAPSHOT-keycloak.jar</code> of <a href="https://github.com/CaritasDeutschland/caritas-onlineberatung-keycloak-otp">https://github.com/CaritasDeutschland/caritas-onlineberatung-keycloak-otp</a>
Copy <code>keycloak-otp-config-spi-1.0-SNAPSHOT-keycloak.jar</code> to deployment folder (usually /opt/jboss/keycloak/standalone/deployments)
Restart keycloak
Configure authentication flow for 2FA mail → see documentation at <a href="https://github.com/CaritasDeutschland/caritas-onlineberatung-keycloak-otp/tree/master">https://github.com/CaritasDeutschland/caritas-onlineberatung-keycloak-otp/tree/master</a>)
Use new flow in direct grant binding</p>
<h3><a class="anchor" aria-hidden="true" id="2021-06-29"></a><a href="#2021-06-29" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2021-06-29</h3>
<p>Update all ressources for the caritas theme. You can find the files in the following folder:
<a href="https://github.com/CaritasDeutschland/caritas-onlineBeratung-backend/tree/master/Keycloak/caritas-theme/login">https://github.com/CaritasDeutschland/caritas-onlineBeratung-backend/tree/master/Keycloak/caritas-theme/login</a></p>
<p>Update the NGINX location configuration for Keycloak. You can view the changes here:
<a href="https://github.com/CaritasDeutschland/caritas-onlineBeratung-backend/pull/78/files#diff-9291636bc8605709ec8aeb30a6cbff80e54e7265fca8d92c0dc26719980a070d">https://github.com/CaritasDeutschland/caritas-onlineBeratung-backend/pull/78/files#diff-9291636bc8605709ec8aeb30a6cbff80e54e7265fca8d92c0dc26719980a070d</a>
<a href="https://github.com/CaritasDeutschland/caritas-onlineBeratung-backend/pull/81/files#diff-9291636bc8605709ec8aeb30a6cbff80e54e7265fca8d92c0dc26719980a070d">https://github.com/CaritasDeutschland/caritas-onlineBeratung-backend/pull/81/files#diff-9291636bc8605709ec8aeb30a6cbff80e54e7265fca8d92c0dc26719980a070d</a></p>
<p>If you want the styling changes to take effect immediately you need to disable caching in the file <code>Keycloak/logging/standalone-ha.xml</code>. Therefore change the following values accordingly:<br>
<code>&lt;staticMaxAge&gt;-1&lt;/staticMaxAge&gt;</code><br>
<code>&lt;cacheThemes&gt;false&lt;/cacheThemes&gt;</code><br>
<code>&lt;cacheTemplates&gt;false&lt;/cacheTemplates&gt;</code></p>
<p>Finally restart Keycloak.</p>
<h3><a class="anchor" aria-hidden="true" id="2021-06-23"></a><a href="#2021-06-23" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2021-06-23</h3>
<p>Update tag to <code>13.0.1</code> in the <code>docker-compose.yml</code> file  - the following changes are necessary:\</p>
<blockquote>
<p>⚠️remove the following lines from your &quot;Keycloak/logging/standalone-ha.xml&quot; file:</p>
</blockquote>
<pre><code class="hljs">&lt;extension <span class="hljs-attribute">module</span>=<span class="hljs-string">"org.wildfly.extension.microprofile.config-smallrye"</span>/&gt;
&lt;extension <span class="hljs-attribute">module</span>=<span class="hljs-string">"org.wildfly.extension.microprofile.health-smallrye"</span>/&gt;
&lt;extension <span class="hljs-attribute">module</span>=<span class="hljs-string">"org.wildfly.extension.microprofile.metrics-smallrye"</span>/&gt;
&lt;subsystem <span class="hljs-attribute">xmlns</span>=<span class="hljs-string">"urn:wildfly:microprofile-config-smallrye:1.0"</span>/&gt;
&lt;subsystem <span class="hljs-attribute">xmlns</span>=<span class="hljs-string">"urn:wildfly:microprofile-health-smallrye:2.0"</span> <span class="hljs-attribute">security-enabled</span>=<span class="hljs-string">"false"</span> <span class="hljs-attribute">empty-liveness-checks-status</span>=<span class="hljs-string">"<span class="hljs-variable">${env.MP_HEALTH_EMPTY_LIVENESS_CHECKS_STATUS:UP}</span>"</span> <span class="hljs-attribute">empty-readiness-checks-status</span>=<span class="hljs-string">"<span class="hljs-variable">${env.MP_HEALTH_EMPTY_READINESS_CHECKS_STATUS:UP}</span>"</span>/&gt;
&lt;subsystem <span class="hljs-attribute">xmlns</span>=<span class="hljs-string">"urn:wildfly:microprofile-metrics-smallrye:2.0"</span> <span class="hljs-attribute">security-enabled</span>=<span class="hljs-string">"false"</span> <span class="hljs-attribute">exposed-subsystems</span>=<span class="hljs-string">"*"</span> <span class="hljs-attribute">prefix</span>=<span class="hljs-string">"<span class="hljs-variable">${wildfly.metrics.prefix:wildfly}</span>"</span>/&gt;
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="2021-03-23"></a><a href="#2021-03-23" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2021-03-23</h3>
<p>The Keycloak technical user for the e-mail check during registration is not needed anymore and can be deleted. Its user ID is located in the <code>UserService.env</code>, value <code>KEYCLOAKSERVICE_TECHUSER_ID</code>.</p>
<h3><a class="anchor" aria-hidden="true" id="2020-12-15"></a><a href="#2020-12-15" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2020-12-15</h3>
<p>You need to change the Token-Settings in your Realm as shown in the screenshot below:
<img src="/documentation/docs/assets/keycloak-token-settings.png" alt="keycloak-token-settings"></p>
<p><code>keycloak.conf</code> in <code>&lt;base&gt;/nginx/conf/locations</code> needs some changes - lines 39-41 need be changed to:<br>
<code>location /auth/resources/ {</code><br>
<code>limit_req zone=by_ip_10rs burst=10 nodelay;</code><br>
<code>proxy_pass http://keycloak:8080/auth/resources/;</code>\</p>
<h3><a class="anchor" aria-hidden="true" id="2020-11-25"></a><a href="#2020-11-25" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2020-11-25</h3>
<p>Update tag to <code>11.0.2</code> in the <code>docker-compose.yml</code> file  - the following changes are necessary:</p>
<blockquote>
<p>⚠️ MariaDB update needs to be performed before this update ⚠️</p>
</blockquote>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/documentation/docs/releases/adminer"><span class="arrow-prev">← </span><span>3rd party - Adminer</span></a><a class="docs-next button" href="/documentation/docs/releases/mariadb"><span class="function-name-prevnext">3rd party - MariaDB</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#general-description">General description</a><ul class="toc-headings"><li><a href="#unreleased">Unreleased</a></li><li><a href="#2022-03-29">2022-03-29</a></li><li><a href="#2022-03-15">2022-03-15</a></li><li><a href="#2021-06-29">2021-06-29</a></li><li><a href="#2021-06-23">2021-06-23</a></li><li><a href="#2021-03-23">2021-03-23</a></li><li><a href="#2020-12-15">2020-12-15</a></li><li><a href="#2020-11-25">2020-11-25</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/documentation/" class="nav-home"><img src="/documentation/img/caritas_logo.svg" alt="Caritas Online-Beratung" width="66" height="58"/></a><div><h5>Docs</h5><a href="/documentation/docs/general/home.html">Home</a><a href="/documentation/docs/setup/setup-backend.html">Setting up Backend</a><a href="/documentation/docs/setup/setup-frontend.html">Setting up Frontend</a></div><div><h5>More</h5><a href="https://github.com/CaritasDeutschland">GitHub</a></div></section><section class="copyright">Copyright © 2022 Caritas Deutschland</section></footer></div></body></html>